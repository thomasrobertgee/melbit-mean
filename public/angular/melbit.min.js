(function(){angular.module("melbitApp",["ngRoute","ngSanitize"]);function e(e,t){e.when("/",{templateUrl:"home/home.view.html",controller:"homeCtrl",controllerAs:"vm"}).when("/about",{templateUrl:"/common/views/genericText.view.html",controller:"aboutCtrl",controllerAs:"vm"}).when("/locatoin/:locationid",{templateUrl:"/locationDetail/locationDetail.view.html",controller:"locationDetailCtrl",controllerAs:"vm"}).otherwise({redirectTo:"/"});t.html5Mode(true)}angular.module("melbitApp").config(["$routeProvider","$locationProvider",e])})();(function(){angular.module("melbitApp").controller("homeCtrl",e);e.$inject=["$scope","melbitData","geolocation"];function e(e,t,o){var n=this;n.pageHeader={title:"Melbit",strapline:"Find places to spend Bitcoin near you!"};n.sidebar={content:"looking for wifi and a seat and some coffee"};n.message="Checking your location";n.getData=function(e){var o=e.coords.latitude,a=e.coords.longitude;n.message="Searching for nearby places";t.locationByCoords(o,a).success(function(e){n.message=e.length>0?"":"No location found nearby";n.data={locations:e};console.log(n.data)}).error(function(e){n.message="Sorry, something's gone wrong, please try again later"})};n.showError=function(t){e.$apply(function(){n.message=t.message})};n.noGeo=function(){e.$apply(function(){n.message="Geolocation is not supported by this browser."})};o.getPosition(n.getData,n.showError,n.noGeo)}})();(function(){angular.module("melbitApp").controller("aboutCtrl",e);function e(){var e=this;e.pageHeader={title:"About Melbit"};e.main={content:"Melbit was created to help people find businesses in Melbourne that accept Bitcoin. The saints food bloggers, moomba the bulldogs the australian open carlton tullamarine, bill clinton ate two bowls hu tong dumplings the espy swanston footscray hobos, ticket inspector bespectacled girls north of the river MSAC secret laneway bars, formula one grand prix cold drip coffee old melbourne gaol. \n\nThe saints, laksa king spring racing carnival old melbourne gaol rooftop bars flemington racecourse, mamasita emerald peacock lions bar kath and kim ac/dc, south of the river tullamarine trams swanston secret laneway bars, hipsters neatly trimmed moustaches melb."}}})();(function(){angular.module("melbitApp").controller("locationDetailCtrl",e);e.$inject=["$routeParams"];function e(e){var t=this;t.locationid=e.locationid;melbitData.locationById(t.locationid).success(function(e){t.data={location:e};t.pageHeader={title:t.data.location.name}}).error(function(e){console.log(e)})}})();(function(){angular.module("melbitApp").service("geolocation",e);function e(){var e=function(e,t,o){if(navigator.geoloction){navigator.geolocation.getCurrentPosition(e,t)}else{o()}};return{getPosition:e}}})();(function(){angular.module("melbitApp").service("melbitData",e);e.$inject=["$http"];function e(e){var t=function(t,o){return e.get("/api/locations?lng="+o+"&lat="+t+"&maxDistance=20")};var o=function(t){return e.get("/api/locations/"+locationdid)};return{locationByCoords:t,locationById:o}}})();(function(){angular.module("melbitApp").filter("formatDistance",t);var e=function(e){return!isNan(parseFloat(e))&&isFinite(e)};function t(){return function(t){var o,n;if(t&&e(t)){if(t>1){o=parseFloat(t).toFixed(1);n="km"}else{o=parseInt(t*1e3,10);n="m"}return o+n}else{return"?"}}}})();(function(){angular.module("melbitApp").filter("addHtmlLineBreaks",e);function e(){return function(e){var t=e.replace(/\n/g,"<br/>");return t}}})();(function(){angular.module("melbitApp").directive("navigation",e);function e(){return{restrict:"EA",templateUrl:"/common/directives/navigation/navigation.template.html"}}})();(function(){angular.module("melbitApp").directive("footerGeneric",e);function e(){return{restrict:"EA",templateUrl:"/common/directives/footerGeneric/footerGeneric.template.html"}}})();(function(){angular.module("melbitApp").directive("pageHeader",e);function e(){return{restrict:"EA",scope:{content:"=content"},templateUrl:"/common/directives/pageHeader/pageHeader.template.html"}}})();(function(){angular.module("melbitApp").directive("ratingStars",e);function e(){return{restrict:"EA",scope:{thisRating:"=rating"},templateUrl:"/common/directives/ratingStars/ratingStars.template.html"}}})();